name: Documentation

on:
  push:
    branches: [ main ]
    paths:
      - 'docs/**'
      - 'README.md'
      - '.github/workflows/docs.yml'

jobs:
  update-wiki:
    name: Update GitHub Wiki
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.10'
    
    - name: Update Wiki
      run: |
        # Clone wiki repository
        git clone https://github.com/${{ github.repository }}.wiki.git wiki-repo
        
        # Copy updated documentation
        cp docs/DaveAgent.wiki/*.md wiki-repo/ || true
        
        # Commit and push if there are changes
        cd wiki-repo
        git config user.name "GitHub Actions Bot"
        git config user.email "davidmonterocrespo24@gmail.com"
        git add *.md
        git diff --quiet && git diff --staged --quiet || (git commit -m "Auto-update wiki from main branch" && git push)
